if (!require("quantmod")) {
install.packages("quantmod")
library(quantmod)
}
start <- as.Date("2010-01-01")
aaple <- getSymbols("AAPL", src = "yahoo", auto.assign= F, from = start)
head(apple)
head(aaple)
aaple <- Ad(getSymbols("AAPL", src = "yahoo", auto.assign= F, from = start))
head(aaple)
test <- c("3","5","7")
weights <- c("0.5","0.1","0.4")
port <- test*weights
aple <- Ad(getSymbols("AAPL", src = "yahoo", auto.assign= F, from = start))
intc <- Ad(getSymbols("INTC", src = "yahoo", auto.assign= F, from = start))
head(intc)
test <- cbind("aple","intc")
View(test)
test <- cbind(aple,intc)
head(test)
port <- test*weights
weights <- c("0.4","0.6")
port <- test*weights
weights
weights <- c(0.4,0.6)
weights
port <- test*weights
head(port)
library(dplyr)
port <- test*weights %>%
mutate(col=sum(test*weights))
port <- test*weights %>%
mutate(col=rowSums(test*weights))
port <- rowSums(test*weights))
port <- rowSums(test*weights)
head(port)
port <- sum(test*weights)
head(port)
port <- test*weights
head(port)
head(test)
head(port)
#price1 <- XOM$PX_LAST
#price2 <- INTC$PX_LAST
s1 <- XOM$PX_LAST
XOM <- read.csv("../data/XOM-bloomberg.csv")
INTC <- read.csv("../data/INTC-bloomberg.csv")
XOM$Dates <- as.Date(XOM$Dates,"%m/%d/%Y")
INTC$Dates <- as.Date(INTC$Dates,"%m/%d/%Y")
library(ggplot2)
# calculate parameter for return
source("../code/parameter/winEstGBM.R")
source("../code/parameter/expEstGBM.R")
# historical VaR/ES
source("../code/stock/HVaR.R")
source("../code/stock/HES.R")
# monte carlo VaR/ES
source("../code/stock/MCVAR & MCES.R")
source("../code/stock/MC_update.R")
source("../code/Put_MCVaR.R")
# Parametric VaR/ES
source("../code/stock/gbmVaR.R")
source("../code/stock/gbmES.R")
source("../code/parametricVaR.R")
source("../doc/calculation_measure.R")
# plot graph
source("../code/plotGraph.R")
#price1 <- XOM$PX_LAST
#price2 <- INTC$PX_LAST
s1 <- XOM$PX_LAST
s2 <- INTC$PX_LAST
dRtn <- 1
year <- 5
par1 <- winEstGBM(s1,dRtn,year)
par2 <- winEstGBM(s2,dRtn,year)
s0<-10000
#### Individual Stock ####
# historical VaR
Hvar <- HVaR_S(s1,0.99,dRtn,year)
plotGraph(Hvar,XOM$Dates)
# paramentric VaR
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,1)
plotGraph(Gvar,XOM$Dates)
# Monte Carlo VaR
MVaR <- MCVaR(s0, par1$mu_gbm, par1$sigma_gbm, p, dt, npaths,years,dRtn)
plotGraph(MVaR,XOM$Dates)
#### Portfolio ####
# Parametric VaR (portfolio follow Normal Distribution)
#s1 <- XOM$PX_LAST
#s2 <- INTC$PX_LAST
s1_0 <- 32.0625 #XOM
s2_0 <- 25.0156 #INTC
mu1 <- par1$mu_gbm[1:7000]
mu2 <- par2$mu_gbm[1:7000]
sigma1 <- par1$sigma_gbm[1:7000]
sigma2 <- par2$sigma_gbm[1:7000]
a <- c(156,200)  # if we only assign weights to each component of portfolio? how to decide position here?
p_price <- cbind(s1,s2)
portfolio_price <- rep(0,length(mu1))
for (i in 1:length(portfolio_price)){
for (j in 1:length(a)){
portfolio_price[i] <- a[j]*p_price[i,j]
}
}
s0 <- c(s1_0,s2_0)  # what's s1_0 and s2_0 here, is the dailty stock price?
v0 = FALSE
mu <- c(mu1,mu2)
sigma <- c(sigma1,sigma2)
datadt <- 1/252
rtn1 <- -diff(log(s1),1)
rtn2 <- -diff(log(s2),1)
rtn1 <- rtn1[1:7000]
rtn2 <- rtn2[1:7000]
rho <- cov(rtn1,rtn2)/datadt/(sigma1*sigma2)
t <- 5/252
p <- 0.99
# paramentric VaR
PVaR <- parametricVaR(a,s0,mu,sigma,rho,p,t)
plotGraph(Gvar,INTC$Dates)
# historical VaR
port_Hvar <- HVaR_S(portfolio_price,0.99,dRtn,year)
plotGraph(port_Hvar,INTC$Dates)
# put optoin
# opvar <- Put_MCVaR(10000,par1$mu_gbm,par1$sigma_gbm,0.01,17.67/100,2085.18,1,100,90,0.99,5,10)  # n?
XOM <- read.csv("../data/XOM-bloomberg.csv")
INTC <- read.csv("../data/INTC-bloomberg.csv")
XOM$Dates <- as.Date(XOM$Dates,"%m/%d/%Y")
INTC$Dates <- as.Date(INTC$Dates,"%m/%d/%Y")
library(ggplot2)
# calculate parameter for return
source("../code/parameter/winEstGBM.R")
source("../code/parameter/expEstGBM.R")
# historical VaR/ES
source("../code/stock/HVaR.R")
source("../code/stock/HES.R")
# monte carlo VaR/ES
# source("../code/stock/MCVAR & MCES.R")
source("../code/stock/MC_update.R")
source("../code/Put_MCVaR.R")
# Parametric VaR/ES
source("../code/stock/gbmVaR.R")
source("../code/stock/gbmES.R")
source("../code/parametricVaR.R")
source("../doc/calculation_measure.R")
# plot graph
source("../code/plotGraph.R")
XOM <- read.csv("../data/XOM-bloomberg.csv")
INTC <- read.csv("../data/INTC-bloomberg.csv")
XOM$Dates <- as.Date(XOM$Dates,"%m/%d/%Y")
INTC$Dates <- as.Date(INTC$Dates,"%m/%d/%Y")
library(ggplot2)
# calculate parameter for return
source("../code/parameter/winEstGBM.R")
source("../code/parameter/expEstGBM.R")
# historical VaR/ES
source("../code/stock/HVaR.R")
source("../code/stock/HES.R")
# monte carlo VaR/ES
# source("../code/stock/MCVAR & MCES.R")
source("../code/stock/MC_update.R")
source("../code/Put_MCVaR.R")
# Parametric VaR/ES
source("../code/stock/gbmVaR.R")
source("../code/stock/gbmES.R")
source("../code/parametricVaR.R")
source("../doc/calculation_measure.R")
# plot graph
source("../code/plotGraph.R")
#price1 <- XOM$PX_LAST
#price2 <- INTC$PX_LAST
s1 <- XOM$PX_LAST
s2 <- INTC$PX_LAST
dRtn <- 1
year <- 5
par1 <- winEstGBM(s1,dRtn,year)
par2 <- winEstGBM(s2,dRtn,year)
s0<-10000
#### Individual Stock ####
# historical VaR
Hvar <- HVaR_S(s1,0.99,dRtn,year)
plotGraph(Hvar,XOM$Dates)
# paramentric VaR
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,1)
plotGraph(Gvar,XOM$Dates)
# Monte Carlo VaR
MVaR <- MCVaR(s0, par1$mu_gbm, par1$sigma_gbm, p, dt, npaths,years,dRtn)
plotGraph(MVaR,XOM$Dates)
par1$mu_gbm
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,1)
plotGraph(Gvar,XOM$Dates)
Hvar <- HVaR_S(s1,0.99,dRtn,year)
plotGraph(Hvar,XOM$Dates)
s1 <- XOM$PX_LAST
s2 <- INTC$PX_LAST
dRtn <- 5
year <- 5
par1 <- winEstGBM(s1,dRtn,year)
par2 <- winEstGBM(s2,dRtn,year)
s0<-10000
Hvar <- HVaR_S(s1,0.99,dRtn,year)
plotGraph(Hvar,XOM$Dates)
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,1)
plotGraph(Gvar,XOM$Dates)
MVaR <- MCVaR(s0, par1$mu_gbm, par1$sigma_gbm, p, dt, npaths,years,dRtn)
plotGraph(MVaR,XOM$Dates)
Hvar <- HVaR_S(s1,0.99,dRtn,year,s0)
plotGraph(Hvar,XOM$Dates)
Hvar <- HVaR_S(s1,0.99,dRtn,year,s0)
plotGraph(Hvar,XOM$Dates)
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,1)
plotGraph(Gvar,XOM$Dates)
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,5)
plotGraph(Gvar,XOM$Dates)
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,5/252)
plotGraph(Gvar,XOM$Dates)
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,dRtn)
plotGraph(Gvar,XOM$Dates)
source("../code/stock/gbmVaR.R")
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,dRtn)
plotGraph(Gvar,XOM$Dates)
MVaR <- MCVaR(s0, par1$mu_gbm, par1$sigma_gbm, p, dt, npaths,years,dRtn)
Hvar <- HVaR_S(s1,0.99,dRtn,year,s0)
plotGraph(Hvar,XOM$Dates)
# paramentric VaR
Gvar <- gbmVaR(s0,par1$mu_gbm,par1$sigma_gbm,0.99,dRtn)
plotGraph(Gvar,XOM$Dates)
MVaR <- MCVaR(s0, par1$mu_gbm, par1$sigma_gbm, p, dt, npaths,years,dRtn)
plotGraph(MVaR,XOM$Dates)
